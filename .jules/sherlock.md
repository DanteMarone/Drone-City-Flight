## 2024-05-23 - History System Logic Discovery: Lazy Resolution Pattern
**Discovery:** The `TransformCommand` in `src/dev/history.js` relies on a "Lazy Resolution" pattern (`_resolveStates`) where it stores `objectUuid` but attempts to find the live object in `world.colliders` at the moment of execution (undo/redo). This is critical for supporting undo operations after a "Delete" or "Load Map" action where the original object reference in memory might have been destroyed and replaced by a new instance with the same UUID.
**Action:** When testing system that persist state across object lifecycles (like Undo/Redo or Save/Load), tests must explicitly verify that operations work using UUID lookups, not just direct object references. I implemented `should resolve objects by UUID if object reference is missing` in `src/verification/test_history.js` to enforce this pattern.
